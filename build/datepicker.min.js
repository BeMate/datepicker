!function(a,b){"use strict";"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(function(a){return b()}):a.DatePicker=b()}(this,function(){"use strict";var a=!!window.addEventListener,b=window.document,c=window.setTimeout,d=function(b,c,d,e){a?b.addEventListener(c,d,!!e):b.attachEvent("on"+c,d)},e=function(b,c,d,e){a?b.removeEventListener(c,d,!!e):b.detachEvent("on"+c,d)},f=function(a,c,d){var e;b.createEvent?(e=b.createEvent("HTMLEvents"),e.initEvent(c,!0,!1),e=r(e,d),a.dispatchEvent(e)):b.createEventObject&&(e=b.createEventObject(),e=r(e,d),a.fireEvent("on"+c,e))},g=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},h=function(a,b){return-1!==(" "+a.className+" ").indexOf(" "+b+" ")},i=function(a,b){h(a,b)||(a.className=""===a.className?b:a.className+" "+b)},j=function(a,b){a.className=g((" "+a.className+" ").replace(" "+b+" "," "))},k=function(a){return/Array/.test(Object.prototype.toString.call(a))},l=function(a){return/Date/.test(Object.prototype.toString.call(a))&&!isNaN(a.getTime())},m=function(a){var b=a.getDay();return 0===b||6===b},n=function(a){return a%4===0&&a%100!==0||a%400===0},o=function(a,b){return[31,n(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},p=function(a){l(a)&&a.setHours(0,0,0,0)},q=function(a,b){return a.getTime()===b.getTime()},r=function(a,b,c){var d,e;for(d in b)e=void 0!==a[d],e&&"object"==typeof b[d]&&null!==b[d]&&void 0===b[d].nodeName?l(b[d])?c&&(a[d]=new Date(b[d].getTime())):k(b[d])?c&&(a[d]=b[d].slice(0)):a[d]=r({},b[d],c):(c||!e)&&(a[d]=b[d]);return a},s=function(a){return a.month<0&&(a.year-=Math.ceil(Math.abs(a.month)/12),a.month+=12),a.month>11&&(a.year+=Math.floor(Math.abs(a.month)/12),a.month-=12),a},t={fields:[],position:"bottom left",reposition:!0,format:"dd/MM/yyyy",parser:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},u=function(a,b,c){for(b+=a.firstDay;b>=7;)b-=7;return c?a.i18n.weekdaysShort[b]:a.i18n.weekdays[b]},v=function(a,b,c,d,e,f,g,h,i,j){if(g)return'<td class="is-empty"></td>';var k=[];return f&&k.push("is-disabled"),e&&k.push("is-today"),d&&k.push("is-selected"),h&&k.push("is-between"),i&&k.push("is-selected-in"),j&&k.push("is-selected-out"),'<td data-day="'+a+'" class="'+k.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+c+'" data-pika-month="'+b+'" data-pika-day="'+a+'">'+a+"</button></td>"},w=function(a,b){return"<tr>"+(b?a.reverse():a).join("")+"</tr>"},x=function(a){return"<tbody>"+a.join("")+"</tbody>"},y=function(a){var b,c=[];for(b=0;7>b;b++)c.push('<th scope="col"><abbr title="'+u(a,b)+'">'+u(a,b,!0)+"</abbr></th>");return"<thead>"+(a.isRTL?c.reverse():c).join("")+"</thead>"},z=function(a,b,c,d,e){var f,g,h,i,j,l=a._o,m=c===l.minYear,n=c===l.maxYear,o='<div class="pika-title">',p=!0,q=!0;for(h=[],f=0;12>f;f++)h.push('<option value="'+(c===e?f-b:12+f-b)+'"'+(f===d?" selected":"")+(m&&f<l.minMonth||n&&f>l.maxMonth?"disabled":"")+">"+l.i18n.months[f]+"</option>");for(i='<div class="pika-label">'+l.i18n.months[d]+'<select class="pika-select pika-select-month" tabindex="-1">'+h.join("")+"</select></div>",k(l.yearRange)?(f=l.yearRange[0],g=l.yearRange[1]+1):(f=c-l.yearRange,g=1+c+l.yearRange),h=[];g>f&&f<=l.maxYear;f++)f>=l.minYear&&h.push('<option value="'+f+'"'+(f===c?" selected":"")+">"+f+"</option>");return j='<div class="pika-label">'+c+l.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+h.join("")+"</select></div>",o+=l.showMonthAfterYear?j+i:i+j,m&&(0===d||l.minMonth>=d)&&(p=!1),n&&(11===d||l.maxMonth<=d)&&(q=!1),0===b&&(o+='<button class="pika-prev'+(p?"":" is-disabled")+'" type="button">'+l.i18n.previousMonth+"</button>"),0===b&&(o+='<button class="pika-next'+(q?"":" is-disabled")+'" type="button">'+l.i18n.nextMonth+"</button>"),o+="</div>"},A=function(a,b){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+y(a)+x(b)+"</table>"},B=function(a,b){var c;for(c=0;c<a.length;c++)b(a[c],c)},C=function(e){var f=this,g=f.config(e);f._onMouseDown=function(a){if(f._v){a=a||window.event;var b=a.target||a.srcElement;if(b){if(!h(b.parentNode,"is-disabled")){if(h(b,"pika-button")&&!h(b,"is-empty"))return f.setDate(new Date(b.getAttribute("data-pika-year"),b.getAttribute("data-pika-month"),b.getAttribute("data-pika-day"))),void c(function(){f.hide(),B(g.fields,function(a){a.blur()})},100);h(b,"pika-prev")?f.prevMonth():h(b,"pika-next")&&f.nextMonth()}if(h(b,"pika-select"))f._c=!0;else{if(!a.preventDefault)return a.returnValue=!1,!1;a.preventDefault()}}}},f._onChange=function(a){a=a||window.event;var b=a.target||a.srcElement;b&&(h(b,"pika-select-month")?f.gotoMonth(b.value):h(b,"pika-select-year")&&f.gotoYear(b.value))},f._onInputChange=function(a){var b,c;c=a.target,a.firedBy!==f&&(b=this.hasParser?this._p.parse(c.value,g.format):new Date(Date.parse(c.value)),l(b)&&f.setDate(b),f._v||f.show(c))},f._onInputFocus=function(a){var b=a.target;null!=f._f&&f._f!==b&&(f._v=!1),f._f=b,f.show(b)},f._onInputClick=function(a){var b=a.target;f.show(b)},f._onClick=function(b){b=b||window.event;var c=b.target||b.srcElement,e=c;if(c){!a&&h(c,"pika-select")&&(c.onchange||(c.setAttribute("onchange","return;"),d(c,"change",f._onChange)));do if(h(e,"pika-single")||-1!==g.fields.indexOf(e))return;while(e=e.parentNode);f._v&&-1===g.fields.indexOf(c)&&-1===g.fields.indexOf(e)&&f.hide()}},f.el=b.createElement("div"),f.el.className="pika-single"+(g.isRTL?" is-rtl":"")+(g.theme?" "+g.theme:"")+(g.multiple?" is-multiple":" is-single"),d(f.el,"ontouchend"in b?"touchend":"mousedown",f._onMouseDown,!0),d(f.el,"change",f._onChange),b.body.appendChild(f.el),f.hasParser=null!=g.parser,B(g.fields,function(a,b){var c;d(a,"change",f._onInputChange),d(a,"click",f._onInputClick),d(a,"focus",f._onInputFocus),c=f.hasParser&&a.value?f._p.parse(a.value,g.format):new Date(Date.parse(a.value)),l(c)?(p(c),b>0?f._e=c:f._s=c,f._f=a,f.gotoDate(c)):f.gotoDate(new Date)}),this.hide()};return C.prototype={config:function(a){this._o||(this._o=r({},t,!0)),this._s=null,this._e=null;var b=r(this._o,a,!0);if(b.isRTL=!!b.isRTL,!k(b.fields)||0===b.fields.length)throw"You must include one or two fields as options";if(b.multiple=b.fields.length>1,this._p=b.parser,B(b.fields,function(a,b){i(a,"pika-trigger"),i(a,"pika-"+(0===b?"in":"out"))}),b.theme="string"==typeof b.theme&&b.theme?b.theme:null,b.disableWeekends=!!b.disableWeekends,b.disableDayFn="function"==typeof b.disableDayFn?b.disableDayFn:null,l(b.minDate)||(b.minDate=!1),l(b.maxDate)||(b.maxDate=!1),b.minDate&&b.maxDate&&b.maxDate<b.minDate&&(b.maxDate=b.minDate=!1),b.minDate&&this.setMinDate(b.minDate),b.maxDate&&(p(b.maxDate),b.maxYear=b.maxDate.getFullYear(),b.maxMonth=b.maxDate.getMonth()),k(b.yearRange)){var c=(new Date).getFullYear()-10;b.yearRange[0]=parseInt(b.yearRange[0],10)||c,b.yearRange[1]=parseInt(b.yearRange[1],10)||c}else b.yearRange=Math.abs(parseInt(b.yearRange,10))||t.yearRange,b.yearRange>100&&(b.yearRange=100);return b},toString:function(a,b){var c=this._s;return a&&(c=h(a,"pika-in")?this._s:this._e),l(c)?this.hasParser?this._p.format(c,b||this._o.format):c.toDateString():""},getDate:function(a){var b=this._s;return a&&"out"===a&&(b=this._e),l(b)?new Date(b.getTime()):null},setDate:function(a,b){if(!a)return"in"===this._w?this._s=null:this._e=null,this._f&&(this._f.value="",f(this._f,"change",{firedBy:this})),this.draw();if("string"==typeof a&&(a=new Date(Date.parse(a))),l(a)){var c,d,e=this._o.minDate,g=this._o.maxDate,h=this;if(l(e)&&e>a?a=e:l(g)&&a>g&&(a=g),c=new Date(a.getTime()),"in"===this._w?(this._s=c,p(this._s),this.gotoDate(this._s)):"out"===this._w&&(this._e=c,p(this._e),this.gotoDate(this._e)),this._f&&(this._f.value=this.toString(this._f),f(this._f,"change",{firedBy:this})),this._s&&this._e){if(this._s.getTime()>this._e.getTime()){var d=this._e;this._e=this._s,this._s=d,d=null}B(this._o.fields,function(a){a.value=h.toString(a),f(a,"change",{firedBy:h})})}b||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate(this._w))}},gotoDate:function(a){var b=!0;if(l(a)){if(this.calendars){var c=new Date(this.calendars[0].year,this.calendars[0].month,1),d=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),e=a.getTime();d.setMonth(d.getMonth()+1),d.setDate(d.getDate()-1),b=e<c.getTime()||d.getTime()<e}b&&(this.calendars=[{month:a.getMonth(),year:a.getFullYear()}]),this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=s(this.calendars[0]),this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(a){isNaN(a)||(this.calendars[0].month=parseInt(a,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(a){isNaN(a)||(this.calendars[0].year=parseInt(a,10),this.adjustCalendars())},setMinDate:function(a){p(a),this._o.minDate=a,this._o.minYear=a.getFullYear(),this._o.minMonth=a.getMonth()},setMaxDate:function(a){this._o.maxDate=a},draw:function(a){if(this._v||a){var b=this._o,d=b.minYear,e=b.maxYear,f=b.minMonth,g=b.maxMonth,h="";this._y<=d&&(this._y=d,!isNaN(f)&&this._m<f&&(this._m=f)),this._y>=e&&(this._y=e,!isNaN(g)&&this._m>g&&(this._m=g)),h+='<div class="pika-lendar">'+z(this,0,this.calendars[0].year,this.calendars[0].month,this.calendars[0].year)+this.render(this.calendars[0].year,this.calendars[0].month)+"</div>",this.el.innerHTML=h;var i=this;null!=this._f&&"hidden"!==this._f.type&&c(function(){i._f&&i._f.focus()},1),"function"==typeof this._o.onDraw&&c(function(){i._o.onDraw.call(i)},0)}},adjustPosition:function(a){var c,d,e,f=a,g=this.el.offsetWidth,h=this.el.offsetHeight,i=window.innerWidth||b.documentElement.clientWidth,j=window.innerHeight||b.documentElement.clientHeight,k=window.pageYOffset||b.body.scrollTop||b.documentElement.scrollTop;if("function"==typeof a.getBoundingClientRect)e=a.getBoundingClientRect(),c=e.left+window.pageXOffset,d=e.bottom+window.pageYOffset;else for(c=f.offsetLeft,d=f.offsetTop+f.offsetHeight;f=f.offsetParent;)c+=f.offsetLeft,d+=f.offsetTop;(this._o.reposition&&c+g>i||this._o.position.indexOf("right")>-1&&c-g+a.offsetWidth>0)&&(c=c-g+a.offsetWidth),(this._o.reposition&&d+h>j+k||this._o.position.indexOf("top")>-1&&d-h-a.offsetHeight>0)&&(d=d-h-a.offsetHeight),this.el.style.position="absolute",this.el.style.left=c+"px",this.el.style.top=d+"px"},render:function(a,b){var c=this._o,d=new Date,e=o(a,b),f=new Date(a,b,1).getDay(),g=[],i=[];p(d),c.firstDay>0&&(f-=c.firstDay,0>f&&(f+=7));for(var j=e+f,k=j;k>7;)k-=7;j+=7-k;for(var n=0,r=0;j>n;n++){var s=new Date(a,b,1+(n-f)),t=!1,u=!1,x=!1,y=!1,z=q(s,d),B=f>n||n>=e+f,C=c.minDate&&s<c.minDate||c.maxDate&&s>c.maxDate||c.disableWeekends&&m(s)||c.disableDayFn&&c.disableDayFn(s);l(this._s)&&(u=q(s,this._s),x=!0),!C&&l(this._s)&&h(this._f,"pika-out")&&(C=s<this._s),l(this._e)&&!u&&(u=q(s,this._e),y=!0),l(this._s)&&l(this._e)&&(t=s>this._s&&s<this._e),u||(x=!1,y=!1),i.push(v(1+(n-f),b,a,u,z,C,B,t,x,y)),7===++r&&(g.push(w(i,c.isRTL)),i=[],r=0)}return A(c,g)},isVisible:function(){return this._v},show:function(a){var c;a||(a=this._o.fields[0]),this._v||(j(this.el,"is-hidden"),this._v=!0,this._w=h(a,"pika-in")?"in":"out",c=this.hasParser&&a.value?this._p.parse(a.value,this._o.format):new Date(Date.parse(a.value)),this.gotoDate(l(c)?c:new Date),d(b,"click",this._onClick),this.adjustPosition(a),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var a=this._v;a!==!1&&(e(b,"click",this._onClick),this.el.style.position="absolute",this.el.style.left="auto",this.el.style.top="auto",i(this.el,"is-hidden"),this._v=!1,this._f=null,void 0!==a&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var a=this;this.hide(),e(this.el,"mousedown",this._onMouseDown,!0),e(this.el,"change",this._onChange),B(this._o.fields,function(b){b.blur(),j(b,"pika-trigger"),j(b,"pika-in"),j(b,"pika-out"),e(b,"change",a._onInputChange),e(b,"click",a._onInputClick),e(b,"focus",a._onInputFocus)}),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},C});